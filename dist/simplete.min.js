var simplete=function(t){function e(i){if(s[i])return s[i].exports;var o=s[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";function i(t,e){this.field=t=t.jquery?t:o(t),this.field.attr("autocomplete","off"),this.options=e=e||{},e.delay=e.delay||250,e.itemSelector=e.itemSelector||"li",e.selectedClass=e.selectedClass||"selected";var s=o("<div />");this.results=o('<div class="suggestions hidden" />').appendTo(s),s.insertBefore(t).prepend(t),this.close();var i=this;t.on("focus input",n(e.delay,this.load.bind(this))).on("blur",function(t){i.selecting||i.close(),delete i.selecting}).on("keydown",this.onKeydown.bind(this)),this.results.on("mousedown click",e.itemSelector,function(t){return"mousedown"===t.type?void(i.selecting=!0):void i.onSelect(t,this)})}var o=s(1),n=s(2);t.exports=e=function(t,e){new i(t,e)},e.Simplete=i,e.debounce=n,i.prototype.onSelect=function(t,e){var s=o(e),i=s.attr("data-value");void 0===i&&(i=s.text().trim()),this.field.val(i).focus();var n=this.field[0];n.setSelectionRange&&n.setSelectionRange(i.length,i.length);var l=this.options.onSelect;l&&l(i,e),this.close()},i.prototype.onKeydown=function(t){var e=t.which;if(!this.active)return void(40===e&&this.load());switch(e){case 13:this.results.find("."+this.options.selectedClass).click();break;case 27:this.close();break;case 38:this.select(!0);break;case 40:this.select();break;default:return}t.preventDefault()},i.prototype.load=function(){var t=this.field,e=t.closest("form").addClass("pending"),s=t.attr("data-formmethod"),i=t.attr("data-formaction"),n="self"===t.attr("data-scope")?t:e,l=o.ajax({type:s||e.attr("method")||"GET",url:i||e.attr("action"),data:n.serialize(),dataType:"html"});l.done(this.open.bind(this)),l.always(function(){e.removeClass("pending")})},i.prototype.select=function(t){var e=this.options.selectedClass,s=this.results.find(this.options.itemSelector),i=s.filter("."+e).removeClass(e),o=0;i.length?(o=s.index(i),o=-1===o?0:o+(t?-1:1)):t&&(o=-1),i=s.eq(o).addClass(e)},i.prototype.open=function(t){switch(this.results.html(t).removeClass("hidden"),this.active=!0,this.options.autoselect){case"first":this.select();break;case"only":1===this.results.find(this.options.itemSelector).length&&this.select()}},i.prototype.close=function(){this.results.empty().addClass("hidden"),delete this.active}},function(t,e,s){t.exports=jQuery},function(t,e,s){t.exports=function(t,e){var s;return function(){var i=this,o=arguments;s&&(clearTimeout(s),s=null),s=setTimeout(function(){e.apply(i,o),s=null},t)}}}]);