var simplete=function(t){function e(i){if(s[i])return s[i].exports;var n=s[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";function i(t,e){if(arguments.length){this.field=t=t.jquery?t:n(t),this.field.attr("autocomplete","off"),this.options=e=e||{},e.delay=e.delay||250,e.minLength=e.minLength||0,e.itemSelector=e.itemSelector||"li",e.selectedClass=e.selectedClass||"selected";var s=n('<div class="simplete" />');this.results=n('<div class="suggestions hidden" />').appendTo(s),s.insertBefore(t).prepend(t),this.close();var i=this;t.on("focus input",o(e.delay,this.onQuery.bind(this))).on("blur",function(t){i.selecting||i.close(),delete i.selecting}).on("keydown",this.onKeydown.bind(this)),this.results.on("mousedown click",e.itemSelector,function(t){return"mousedown"===t.type?void(i.selecting=!0):i.onSelect(t,this)})}}var n=s(1),o=s(2);t.exports=e=function(t,e){new i(t,e)},e.Simplete=i,e.debounce=o,i.prototype.onSelect=function(t,e){var s=n(t.target);if(s.is("a")){if(void 0!==s.attr("href"))return}else{var i=n("a",e);if(1===i.length&&void 0!==i.attr("href"))return void i[0].click()}var o=n(e),r=o.attr("data-value");void 0===r&&(r=o.text().trim()),this.suppressLoad=!0,this.field.val(r).focus();var a=this.field[0];a.setSelectionRange&&a.setSelectionRange(r.length,r.length);var l=this.options.onSelect;l&&l(r,e),this.close()},i.prototype.onKeydown=function(t){var e=t.which;if(!this.active)return void(40===e&&this.onQuery());switch(e){case 13:var s=this.results.find("."+this.options.selectedClass);s.click();break;case 27:this.close();break;case 38:this.cycle(!0);break;case 40:this.cycle();break;default:return}t.preventDefault()},i.prototype.onQuery=function(){if(this.suppressLoad)return void delete this.suppressLoad;var t=this.field;if(!(this.field.val().length<this.options.minLength)){var e=t.closest("form").addClass("pending"),s=t.attr("data-formmethod"),i=t.attr("data-formaction"),n="self"===t.attr("data-scope")?t:e,o=n.serializeArray(),r=t.attr("data-parameter");if(r){var a=t.attr("name");o.forEach(function(t){t.name===a&&(t.name=r)})}var l=this.load(s||e.attr("method")||"GET",i||e.attr("action"),o);l.done(this.open.bind(this)),l.always(function(){e.removeClass("pending")})}},i.prototype.cycle=function(t){var e=this.options.selectedClass,s=this.results.find(this.options.itemSelector),i=s.filter("."+e).removeClass(e),n=0;i.length?(n=s.index(i),n=-1===n?0:n+(t?-1:1)):t&&(n=-1),i=s.eq(n).addClass(e)},i.prototype.open=function(t){switch(this.results.html(t).removeClass("hidden"),this.active=!0,this.options.autoselect){case"first":this.cycle();break;case"only":1===this.results.find(this.options.itemSelector).length&&this.cycle()}},i.prototype.close=function(){this.results.empty().addClass("hidden"),delete this.active},i.prototype.load=function(t,e,s){return n.ajax({type:t,url:e,data:jQuery.param(s),dataType:"html"})}},function(t,e){t.exports=jQuery},function(t,e){t.exports=function(t,e){var s;return function(){var i=this,n=arguments;s&&(clearTimeout(s),s=null),s=setTimeout(function(){e.apply(i,n),s=null},t)}}}]);